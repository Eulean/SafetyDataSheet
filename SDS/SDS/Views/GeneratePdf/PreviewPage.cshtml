@{
    ViewData["Title"] = "Safety Data Sheet Preview";
}

<div class="container mt-4">
    <div class="row mb-3">
        <div class="col">
            <h2>Safety Data Sheet Preview</h2>
            <p class="text-muted">Product No: @ViewBag.ProductNo</p>
        </div>
        <div class="col-auto">
            <div class="btn-group">
                <a href="@Url.Action("Generate", "GeneratePdf", new { productNo = ViewBag.ProductNo })"
                    class="btn btn-primary">
                    <i class="fas fa-download"></i> Download PDF
                </a>
                <a href="javascript:void(0)" onclick="window.print()" class="btn btn-outline-secondary">
                    <i class="fas fa-print"></i> Print
                </a>
            </div>
        </div>
    </div>

    <div class="card shadow">
        <div class="card-body p-0">
            <iframe src="@Url.Action("Preview", "GeneratePdf", new { productNo = ViewBag.ProductNo })"
                style="width: 100%; height: 800px; border: none;" title="Safety Data Sheet PDF Preview"></iframe>
        </div>
        <div class="card-footer bg-light">
            <small class="text-muted">
                This is a preview of the Safety Data Sheet. For official use, please download the PDF document.
            </small>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Add any JavaScript needed for the preview page here
        $(document).ready(function () {
            // Example: Add a loading indicator
            const iframe = $('iframe');
            const loadingIndicator = $('<div class="text-center p-5"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div><p class="mt-3">Loading PDF preview...</p></div>');

            iframe.before(loadingIndicator);

            iframe.on('load', function () {
                loadingIndicator.remove();
            });
        });
    </script>
}
